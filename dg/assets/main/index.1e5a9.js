window.__require=function t(e,o,i){function n(r,a){if(!o[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var h="function"==typeof __require&&__require;if(!a&&h)return h(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var u=o[r]={exports:{}};e[r][0].call(u.exports,function(t){return n(e[r][1][t]||t)},u,u.exports,t,e,o,i)}return o[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<i.length;r++)n(i[r]);return n}({PicAniActive:[function(t,e,o){"use strict";cc._RF.push(e,"fdd31fMBihCDKhd+4/EAsu/","PicAniActive");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return n(e,t),e.prototype.start=function(){},s([c(cc.Label)],e.prototype,"label",void 0),s([c],e.prototype,"text",void 0),s([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],PicAni:[function(t,e,o){"use strict";cc._RF.push(e,"eda71vdd+xNCZ0pLnHHs5BB","PicAni");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.picsChange=[],e.pic=null,e.intervalTime=100,e.stopFlag=!1,e}return n(e,t),e.prototype.start=function(){this.init()},e.prototype.init=function(){this.stopFlag=!1,this.changePicLoop(0)},e.prototype.changePicLoop=function(t){var e=this;this.stopFlag||(t==this.picsChange.length&&(t=0),this.pic.spriteFrame=this.picsChange[t],t++,setTimeout(function(){e.changePicLoop(t)},this.intervalTime))},e.prototype.stop=function(){this.stopFlag=!0,this.pic.spriteFrame=this.picsChange[0]},e.prototype.playOnce=function(t){var e=this;t!=this.picsChange.length&&(this.pic.spriteFrame=this.picsChange[t],t++,setTimeout(function(){e.changePicLoop(t)},this.intervalTime))},s([c(cc.SpriteFrame)],e.prototype,"picsChange",void 0),s([c(cc.Sprite)],e.prototype,"pic",void 0),s([c],e.prototype,"intervalTime",void 0),s([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],VideoM:[function(t,e,o){"use strict";cc._RF.push(e,"e31abOAVUtGo4I30+wNQb3O","VideoM");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property;cc.macro.ENABLE_TRANSPARENT_CANVAS=!0;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.videoplayer=null,e.text="hello",e}return n(e,t),e.prototype.onLoad=function(){this.videoplayer.node.on("ready-to-play",this.callback,this)},e.prototype.start=function(){},e.prototype.callback=function(t){t.detail,this.videoplayer&&(this.videoplayer.play(),this.videoplayer.node.on("completed",this.callback1,this))},e.prototype.callback1=function(){this.videoplayer.play(),this.videoplayer.stayOnBottom=!0},s([c(cc.VideoPlayer)],e.prototype,"videoplayer",void 0),s([c],e.prototype,"text",void 0),s([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],mainATown:[function(t,e,o){"use strict";cc._RF.push(e,"f6c85Zfc9JBHK+fnDX9WGz0","mainATown");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.avatar=null,e.bgNode=null,e.dialogInit0=[],e.dialogInit1=[],e.dialogFarmCarBesideCompany0=[],e.dialogFarmCarBesideCompany1=[],e.farmCarBesideCompanyClue=null,e.farmCarBesideCompanyDoor=null,e.dialogCigaretteBesideCompany0=[],e.cigaretteBesideCompanyClue=null,e.cigaretteBesideCompanyDoor=null,e.dialogDonutsStore0=[],e.donutsStoreClue=null,e.donutsStoreDoor=null,e.bishopClue=null,e.bishopDoor=null,e.dialogSister0=[],e.sisterClue=null,e.sisterDoor=null,e.dialogNextScene0=[],e.dialogNextScene1=[],e.dialogNextScene2=[],e.dialogNextScene3=[],e.nextSceneClue=null,e.nextSceneClueSpriteExit=null,e.nextSceneClueSpriteExitDetail=null,e.posArr=[],e.posIndex=0,e}return n(e,t),e.prototype.start=function(){var t=this;this.posArr=[cc.v3(-560,0),cc.v3(-300,0),cc.v3(-40,0),cc.v3(220,0),cc.v3(480,0)],this.nextSceneClue.on("touchstart",function(){cc.director.loadScene("vCity")}),this.bgNode=cc.find("Canvas/Game/background"),this.bgNode.on("touchcancel",function(){t.bgNode.off("touchmove",t.calcuCameraPosition,t)},this),this.init(),this.bindOn()},e.prototype.bindOff=function(){this.farmCarBesideCompanyDoor.off("touchstart",this.farmCarBesideCompanylog,this),this.cigaretteBesideCompanyDoor.off("touchstart",this.cigaretteBesideCompanyDialog,this),this.donutsStoreDoor.off("touchstart",this.donutsStoreDialog,this),this.bishopDoor.off("touchstart",this.bishopDialog,this),this.sisterDoor.off("touchstart",this.sisterDialog,this),this.bgNode.off("touchstart",this.followMouse,this),this.bgNode.off("touchend",this.stopFollowMouse,this),this.bgNode.off("mousewheel",this.changeBgScale,this)},e.prototype.bindOn=function(){this.farmCarBesideCompanyDoor.on("touchstart",this.farmCarBesideCompanylog,this),this.cigaretteBesideCompanyDoor.on("touchstart",this.cigaretteBesideCompanyDialog,this),this.donutsStoreDoor.on("touchstart",this.donutsStoreDialog,this),this.bishopDoor.on("touchstart",this.bishopDialog,this),this.sisterDoor.on("touchstart",this.sisterDialog,this),this.bgNode.on("touchstart",this.followMouse,this),this.bgNode.on("touchend",this.stopFollowMouse,this),this.bgNode.on("mousewheel",this.changeBgScale,this)},e.prototype.init=function(){this.clearAvatarDialogs(),this.firstDialog()},e.prototype.firstDialog=function(){var t=this;this.bindOff(),this.doThisChangeForAvatarAndDialog(this.dialogInit0,0),setTimeout(function(){t.doThisChangeForAvatarAndDialog(t.dialogInit1,0)},1e3*this.dialogInit0.length)},e.prototype.farmCarBesideCompanylog=function(){var t=this;this.bindOff(),0==this.farmCarBesideCompanyClue.active&&(this.farmCarBesideCompanyClue.position=this.posArr[this.posIndex],this.posIndex++),this.farmCarBesideCompanyClue.children[0].active=!0,this.farmCarBesideCompanyClue.active=!0,this.doThisChangeForAvatarAndDialog(this.dialogFarmCarBesideCompany0,0),setTimeout(function(){t.doThisChangeForAvatarAndDialog(t.dialogFarmCarBesideCompany1,0),setTimeout(function(){t.farmCarBesideCompanyClue.children[0].active=!1,t.farmCarBesideCompanyClue.on("mousemove",function(){t.farmCarBesideCompanyClue.children[0].active=!0},t),t.farmCarBesideCompanyClue.on("mouseleave",function(){t.farmCarBesideCompanyClue.children[0].active=!1},t),t.bindOn()},3e3)},1e3*this.dialogFarmCarBesideCompany0.length)},e.prototype.cigaretteBesideCompanyDialog=function(){var t=this;this.bindOff(),0==this.cigaretteBesideCompanyClue.active&&(this.cigaretteBesideCompanyClue.position=this.posArr[this.posIndex],this.posIndex++),this.cigaretteBesideCompanyClue.children[0].active=!0,this.cigaretteBesideCompanyClue.active=!0,this.doThisChangeForAvatarAndDialog(this.dialogCigaretteBesideCompany0,0),setTimeout(function(){t.cigaretteBesideCompanyClue.children[0].active=!1,t.cigaretteBesideCompanyClue.on("mousemove",function(){t.cigaretteBesideCompanyClue.children[0].active=!0},t),t.cigaretteBesideCompanyClue.on("mouseleave",function(){t.cigaretteBesideCompanyClue.children[0].active=!1},t),t.bindOn()},3e3)},e.prototype.donutsStoreDialog=function(){var t=this;this.bindOff(),0==this.donutsStoreClue.active&&(this.donutsStoreClue.position=this.posArr[this.posIndex],this.posIndex++),this.donutsStoreClue.children[0].active=!0,this.donutsStoreClue.active=!0,this.doThisChangeForAvatarAndDialog(this.dialogDonutsStore0,0),setTimeout(function(){t.donutsStoreClue.children[0].active=!1,t.donutsStoreClue.on("mousemove",function(){t.donutsStoreClue.children[0].active=!0},t),t.donutsStoreClue.on("mouseleave",function(){t.donutsStoreClue.children[0].active=!1},t),t.bindOn()},3e3)},e.prototype.bishopDialog=function(){var t=this;this.bindOff(),0==this.bishopClue.active&&(this.bishopClue.position=this.posArr[this.posIndex],this.posIndex++),this.bishopClue.children[0].active=!0,this.bishopClue.active=!0,setTimeout(function(){t.bishopClue.children[0].active=!1,t.bishopClue.on("mousemove",function(){t.bishopClue.children[0].active=!0},t),t.bishopClue.on("mouseleave",function(){t.bishopClue.children[0].active=!1},t),t.bindOn()},1e3)},e.prototype.sisterDialog=function(){var t=this;this.bindOff(),0==this.sisterClue.active&&(this.sisterClue.position=this.posArr[this.posIndex],this.posIndex++),this.sisterClue.children[0].active=!0,this.sisterClue.active=!0,this.doThisChangeForAvatarAndDialog(this.dialogSister0,0),setTimeout(function(){t.sisterClue.children[0].active=!1,t.sisterClue.on("mousemove",function(){t.sisterClue.children[0].active=!0},t),t.sisterClue.on("mouseleave",function(){t.sisterClue.children[0].active=!1},t),t.bindOn()},3e3)},e.prototype.doThisChangeForAvatarAndDialog=function(t,e){var o=this;0==e&&(this.avatar.getComponent(cc.Sprite).spriteFrame=t[e]),e+1!=t.length?(cc.find("dialog"+e,this.avatar).getComponent(cc.Sprite).spriteFrame=t[e+1],e++,setTimeout(function(){o.doThisChangeForAvatarAndDialog(t,e)},1e3)):setTimeout(function(){o.clearAvatarDialogs()},500)},e.prototype.clearAvatarDialogs=function(){this.avatar.getComponent(cc.Sprite).spriteFrame=null;for(var t=0;t<4;t++)cc.find("dialog"+t,this.avatar).getComponent(cc.Sprite).spriteFrame=null},e.prototype.followMouse=function(){this.bgNode.on("touchmove",this.calcuCameraPosition,this)},e.prototype.stopFollowMouse=function(){this.bgNode.off("touchmove",this.calcuCameraPosition,this)},e.prototype.calcuCameraPosition=function(t){var e=cc.find("Main Camera",this.node),o=t.getDelta(),i=e.position.subtract(cc.v3(o.x,o.y,0)),n=this.bgNode.width*this.bgNode.scale,s=this.bgNode.height*this.bgNode.scale;i.x>n/2-e.width/2?i.x=n/2-e.width/2:i.x<-(n/2-e.width/2)&&(i.x=-(n/2-e.width/2)),i.y>s/2-e.height/2?i.y=s/2-e.height/2:i.y<-(s/2-e.height/2+100)&&(i.y=-(s/2-e.height/2+100)),e.position=i},e.prototype.changeBgScale=function(t){console.log(this.bgNode.scale),t.getScrollY()>0?this.bgNode.scale<1&&(this.bgNode.scale+=.05):t.getScrollY()<0&&this.bgNode.scale>.8&&(this.bgNode.scale-=.05)},e.prototype.isClueShow=function(){var t=this;1==this.farmCarBesideCompanyClue.active&&1==this.cigaretteBesideCompanyClue.active&&1==this.donutsStoreClue.active&&1==this.bishopClue.active&&1==this.sisterClue.active&&"found"!=this.nextSceneClue.name&&(this.nextSceneClue.name="found",setTimeout(function(){t.nextSceneClue.active=!0,t.bindOff(),t.doThisChangeForAvatarAndDialog(t.dialogNextScene0,0),setTimeout(function(){t.doThisChangeForAvatarAndDialog(t.dialogNextScene1,0),setTimeout(function(){t.doThisChangeForAvatarAndDialog(t.dialogNextScene2,0),setTimeout(function(){t.doThisChangeForAvatarAndDialog(t.dialogNextScene3,0),setTimeout(function(){t.nextSceneClue.width=80,t.nextSceneClue.height=190,t.nextSceneClue.getComponent(cc.Sprite).spriteFrame=t.nextSceneClueSpriteExit,t.nextSceneClue.children[0].getComponent(cc.Sprite).spriteFrame=t.nextSceneClueSpriteExitDetail,t.nextSceneClue.on("mousemove",function(){t.nextSceneClue.children[0].active=!0},t),t.nextSceneClue.on("mouseleave",function(){t.nextSceneClue.children[0].active=!1},t),t.bindOn()},3e3)},1e3*t.dialogNextScene2.length)},1e3*t.dialogNextScene1.length)},1e3*t.dialogNextScene0.length)},5e3))},e.prototype.update=function(){this.isClueShow()},s([c(cc.Node)],e.prototype,"avatar",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogInit0",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogInit1",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogFarmCarBesideCompany0",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogFarmCarBesideCompany1",void 0),s([c(cc.Node)],e.prototype,"farmCarBesideCompanyClue",void 0),s([c(cc.Node)],e.prototype,"farmCarBesideCompanyDoor",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogCigaretteBesideCompany0",void 0),s([c(cc.Node)],e.prototype,"cigaretteBesideCompanyClue",void 0),s([c(cc.Node)],e.prototype,"cigaretteBesideCompanyDoor",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogDonutsStore0",void 0),s([c(cc.Node)],e.prototype,"donutsStoreClue",void 0),s([c(cc.Node)],e.prototype,"donutsStoreDoor",void 0),s([c(cc.Node)],e.prototype,"bishopClue",void 0),s([c(cc.Node)],e.prototype,"bishopDoor",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogSister0",void 0),s([c(cc.Node)],e.prototype,"sisterClue",void 0),s([c(cc.Node)],e.prototype,"sisterDoor",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogNextScene0",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogNextScene1",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogNextScene2",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogNextScene3",void 0),s([c(cc.Node)],e.prototype,"nextSceneClue",void 0),s([c(cc.SpriteFrame)],e.prototype,"nextSceneClueSpriteExit",void 0),s([c(cc.SpriteFrame)],e.prototype,"nextSceneClueSpriteExitDetail",void 0),s([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],mainVCity:[function(t,e,o){"use strict";cc._RF.push(e,"e3983dfFHhC9LntfleLxyTn","mainVCity");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.avatar=null,e.bgNode=null,e.picAni=null,e.dialogInit0=[],e.dialogInit1=[],e.bishopPicClue=null,e.bishopBodyClue=null,e.picsChange=[],e.dialogFoundBishop0=[],e.dialogFoundBishop1=[],e.foundBishopDoor=null,e.found=null,e.end=null,e.posArr=[],e.posIndex=0,e}return n(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){var t=this;this.posArr=[cc.v3(-560,0),cc.v3(-300,0),cc.v3(-40,0),cc.v3(220,0),cc.v3(480,0)],this.bgNode=cc.find("Canvas/Game/background"),this.bgNode.on("touchcancel",function(){t.bgNode.off("touchmove",t.calcuCameraPosition,t)},this),this.init(),this.bindOn()},e.prototype.bindOff=function(){this.foundBishopDoor.off("touchstart",this.foundBishoplog,this),this.bgNode.off("touchstart",this.followMouse,this),this.bgNode.off("touchend",this.stopFollowMouse,this),this.bgNode.off("mousewheel",this.changeBgScale,this)},e.prototype.bindOn=function(){this.foundBishopDoor.on("touchstart",this.foundBishoplog,this),this.bgNode.on("touchstart",this.followMouse,this),this.bgNode.on("touchend",this.stopFollowMouse,this),this.bgNode.on("mousewheel",this.changeBgScale,this)},e.prototype.init=function(){this.clearAvatarDialogs(),this.firstDialog()},e.prototype.firstDialog=function(){var t=this;this.bindOff(),0==this.bishopPicClue.active&&(this.bishopPicClue.position=this.posArr[this.posIndex],this.posIndex++),0==this.bishopBodyClue.active&&(this.bishopBodyClue.position=this.posArr[this.posIndex],this.posIndex++),this.bishopPicClue.children[0].active=!0,this.bishopPicClue.active=!0,this.bishopBodyClue.children[0].active=!0,this.bishopBodyClue.active=!0,this.doThisChangeForAvatarAndDialog(this.dialogInit0,0),setTimeout(function(){t.doThisChangeForAvatarAndDialog(t.dialogInit1,0),setTimeout(function(){t.bishopPicClue.children[0].active=!1,t.bishopPicClue.on("mousemove",function(){t.bishopPicClue.children[0].active=!0},t),t.bishopPicClue.on("mouseleave",function(){t.bishopPicClue.children[0].active=!1},t),t.bishopBodyClue.children[0].active=!1,t.bishopBodyClue.on("mousemove",function(){t.bishopBodyClue.children[0].active=!0},t),t.bishopBodyClue.on("mouseleave",function(){t.bishopBodyClue.children[0].active=!1},t),t.bindOn()},3e3)},1e3*this.dialogInit0.length)},e.prototype.foundBishoplog=function(){var t=this;this.bindOff(),this.found.active=!0,this.doThisChangeForAvatarAndDialog(this.dialogFoundBishop0,0),setTimeout(function(){t.playOnce(0),t.doThisChangeForAvatarAndDialog(t.dialogFoundBishop1,0),setTimeout(function(){t.end.active=!0},1e3*t.dialogFoundBishop1.length)},1e3*this.dialogFoundBishop0.length)},e.prototype.doThisChangeForAvatarAndDialog=function(t,e){var o=this;0==e&&(this.avatar.getComponent(cc.Sprite).spriteFrame=t[e]),e+1!=t.length?(cc.find("dialog"+e,this.avatar).getComponent(cc.Sprite).spriteFrame=t[e+1],e++,setTimeout(function(){o.doThisChangeForAvatarAndDialog(t,e)},1e3)):setTimeout(function(){o.clearAvatarDialogs()},500)},e.prototype.clearAvatarDialogs=function(){this.avatar.getComponent(cc.Sprite).spriteFrame=null;for(var t=0;t<4;t++)cc.find("dialog"+t,this.avatar).getComponent(cc.Sprite).spriteFrame=null},e.prototype.followMouse=function(){this.bgNode.on("touchmove",this.calcuCameraPosition,this)},e.prototype.stopFollowMouse=function(){this.bgNode.off("touchmove",this.calcuCameraPosition,this)},e.prototype.calcuCameraPosition=function(t){var e=cc.find("Main Camera",this.node),o=t.getDelta(),i=e.position.subtract(cc.v3(o.x,o.y,0)),n=this.bgNode.width*this.bgNode.scale,s=this.bgNode.height*this.bgNode.scale;i.x>n/2-e.width/2?i.x=n/2-e.width/2:i.x<-(n/2-e.width/2)&&(i.x=-(n/2-e.width/2)),i.y>s/2-e.height/2?i.y=s/2-e.height/2:i.y<-(s/2-e.height/2+100)&&(i.y=-(s/2-e.height/2+100)),e.position=i},e.prototype.changeBgScale=function(t){console.log(this.bgNode.scale),t.getScrollY()>0?this.bgNode.scale<1&&(this.bgNode.scale+=.05):t.getScrollY()<0&&this.bgNode.scale>.6&&(this.bgNode.scale-=.05)},e.prototype.playOnce=function(t){var e=this;t!=this.picsChange.length&&(this.picAni.spriteFrame=this.picsChange[t],t++,setTimeout(function(){e.playOnce(t)},100))},e.prototype.update=function(){},s([c(cc.Node)],e.prototype,"avatar",void 0),s([c(cc.Sprite)],e.prototype,"picAni",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogInit0",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogInit1",void 0),s([c(cc.Node)],e.prototype,"bishopPicClue",void 0),s([c(cc.Node)],e.prototype,"bishopBodyClue",void 0),s([c(cc.SpriteFrame)],e.prototype,"picsChange",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogFoundBishop0",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogFoundBishop1",void 0),s([c(cc.Node)],e.prototype,"foundBishopDoor",void 0),s([c(cc.Node)],e.prototype,"found",void 0),s([c(cc.Node)],e.prototype,"end",void 0),s([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],main:[function(t,e,o){"use strict";cc._RF.push(e,"a105efmPHhKs7OkcNjEtC9P","main");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.avatar=null,e.bg=null,e.bgNode=null,e.bgComponent=null,e.dialogInit0=[],e.dialogInit1=[],e.dialogInit2=[],e.dialogInit3=[],e.dialogStoreHouse0=[],e.dialogStoreHouse1=[],e.storeHouseClickPic=null,e.storeHouseClue=null,e.storeHouseDoor=null,e.dialogHouse0=[],e.dialogHouse1=[],e.houseClickPic=null,e.houseClue=null,e.houseDoor=null,e.dialogFarmHouse0=[],e.farmHouseClickPic=null,e.farmHouseClue=null,e.farmHouseDoor=null,e.dialogPastureHouse0=[],e.pastureHouseClickPic=null,e.pastureHouseClue=null,e.pastureHousDoor=null,e.dialogWindowsill0=[],e.windowsClue=null,e.windowsDoor=null,e.dialogNextScene0=[],e.dialogNextScene1=[],e.nextSceneClue=null,e.posArr=[],e.posIndex=0,e}return n(e,t),e.prototype.start=function(){var t=this;this.posArr=[cc.v3(-560,0),cc.v3(-300,0),cc.v3(-40,0),cc.v3(220,0),cc.v3(480,0)],this.nextSceneClue.on("touchstart",function(){cc.director.loadScene("aTown")}),this.bgNode=cc.find("Canvas/Game/Background"),this.bgComponent=this.bg.getComponent("PicAni"),this.bgNode.on("touchcancel",function(){t.bgNode.off("touchmove",t.calcuCameraPosition,t)},this),this.init(),this.bindOn()},e.prototype.bindOff=function(){this.houseDoor.off("touchstart",this.houseDialog,this),this.storeHouseDoor.off("touchstart",this.storeHouseDialog,this),this.farmHouseDoor.off("touchstart",this.farmHouseDialog,this),this.pastureHousDoor.off("touchstart",this.pastureHouseDialog,this),this.windowsDoor.off("touchstart",this.windowsDialog,this),this.bgNode.off("touchstart",this.followMouse,this),this.bgNode.off("touchend",this.stopFollowMouse,this),this.bgNode.off("mousewheel",this.changeBgScale,this)},e.prototype.bindOn=function(){this.houseDoor.on("touchstart",this.houseDialog,this),this.storeHouseDoor.on("touchstart",this.storeHouseDialog,this),this.farmHouseDoor.on("touchstart",this.farmHouseDialog,this),this.pastureHousDoor.on("touchstart",this.pastureHouseDialog,this),this.windowsDoor.on("touchstart",this.windowsDialog,this),this.bgNode.on("touchstart",this.followMouse,this),this.bgNode.on("touchend",this.stopFollowMouse,this),this.bgNode.on("mousewheel",this.changeBgScale,this)},e.prototype.init=function(){this.clearAvatarDialogs(),this.firstDialog()},e.prototype.firstDialog=function(){var t=this;this.bindOff(),this.doThisChangeForAvatarAndDialog(this.dialogInit0,0),setTimeout(function(){t.doThisChangeForAvatarAndDialog(t.dialogInit1,0),setTimeout(function(){t.doThisChangeForAvatarAndDialog(t.dialogInit2,0),setTimeout(function(){t.doThisChangeForAvatarAndDialog(t.dialogInit3,0),t.bindOn()},1e3*t.dialogInit2.length)},1e3*t.dialogInit1.length)},1e3*this.dialogInit0.length)},e.prototype.houseDialog=function(){var t=this;this.bindOff(),this.bgComponent.stop(),this.houseClickPic.active=!0,0==this.houseClue.active&&(this.houseClue.position=this.posArr[this.posIndex],this.posIndex++),this.houseClue.children[0].active=!0,this.houseClue.active=!0,this.doThisChangeForAvatarAndDialog(this.dialogHouse0,0),setTimeout(function(){t.doThisChangeForAvatarAndDialog(t.dialogHouse1,0),setTimeout(function(){t.houseClue.children[0].active=!1,t.houseClue.on("mousemove",function(){t.houseClue.children[0].active=!0},t),t.houseClue.on("mouseleave",function(){t.houseClue.children[0].active=!1},t),t.bgComponent.init(),t.bindOn()},3e3)},1e3*this.dialogHouse0.length)},e.prototype.storeHouseDialog=function(){var t=this;this.bindOff(),this.bgComponent.stop(),this.storeHouseClickPic.active=!0,0==this.storeHouseClue.active&&(this.storeHouseClue.position=this.posArr[this.posIndex],this.posIndex++),this.storeHouseClue.children[0].active=!0,this.storeHouseClue.active=!0,this.doThisChangeForAvatarAndDialog(this.dialogStoreHouse0,0),setTimeout(function(){t.doThisChangeForAvatarAndDialog(t.dialogStoreHouse1,0),setTimeout(function(){t.storeHouseClue.children[0].active=!1,t.storeHouseClue.on("mousemove",function(){t.storeHouseClue.children[0].active=!0},t),t.storeHouseClue.on("mouseleave",function(){t.storeHouseClue.children[0].active=!1},t),t.bgComponent.init(),t.bindOn()},3e3)},1e3*this.dialogStoreHouse0.length)},e.prototype.farmHouseDialog=function(){var t=this;this.bindOff(),this.bgComponent.stop(),this.farmHouseClickPic.active=!0,0==this.farmHouseClue.active&&(this.farmHouseClue.position=this.posArr[this.posIndex],this.posIndex++),this.farmHouseClue.children[0].active=!0,this.farmHouseClue.active=!0,this.doThisChangeForAvatarAndDialog(this.dialogFarmHouse0,0),setTimeout(function(){t.farmHouseClue.children[0].active=!1,t.farmHouseClue.on("mousemove",function(){t.farmHouseClue.children[0].active=!0},t),t.farmHouseClue.on("mouseleave",function(){t.farmHouseClue.children[0].active=!1},t),t.bgComponent.init(),t.bindOn()},3e3)},e.prototype.pastureHouseDialog=function(){var t=this;this.bindOff(),this.bgComponent.stop(),this.pastureHouseClickPic.active=!0,0==this.pastureHouseClue.active&&(this.pastureHouseClue.position=this.posArr[this.posIndex],this.posIndex++),this.pastureHouseClue.children[0].active=!0,this.pastureHouseClue.active=!0,this.doThisChangeForAvatarAndDialog(this.dialogPastureHouse0,0),setTimeout(function(){t.pastureHouseClue.children[0].active=!1,t.pastureHouseClue.on("mousemove",function(){t.pastureHouseClue.children[0].active=!0},t),t.pastureHouseClue.on("mouseleave",function(){t.pastureHouseClue.children[0].active=!1},t),t.bgComponent.init(),t.bindOn()},3e3)},e.prototype.windowsDialog=function(){var t=this;this.bindOff(),this.bgComponent.stop(),0==this.windowsClue.active&&(this.windowsClue.position=this.posArr[this.posIndex],this.posIndex++),this.windowsClue.children[0].active=!0,this.windowsClue.active=!0,this.doThisChangeForAvatarAndDialog(this.dialogWindowsill0,0),setTimeout(function(){t.windowsClue.children[0].active=!1,t.windowsClue.on("mousemove",function(){t.windowsClue.children[0].active=!0},t),t.windowsClue.on("mouseleave",function(){t.windowsClue.children[0].active=!1},t),t.bgComponent.init(),t.bindOn()},3e3)},e.prototype.doThisChangeForAvatarAndDialog=function(t,e){var o=this;0==e&&(this.avatar.getComponent(cc.Sprite).spriteFrame=t[e]),e+1!=t.length?(cc.find("dialog"+e,this.avatar).getComponent(cc.Sprite).spriteFrame=t[e+1],e++,setTimeout(function(){o.doThisChangeForAvatarAndDialog(t,e)},1e3)):setTimeout(function(){o.clearAvatarDialogs()},500)},e.prototype.clearAvatarDialogs=function(){this.avatar.getComponent(cc.Sprite).spriteFrame=null;for(var t=0;t<4;t++)cc.find("dialog"+t,this.avatar).getComponent(cc.Sprite).spriteFrame=null},e.prototype.followMouse=function(){this.bgNode.on("touchmove",this.calcuCameraPosition,this)},e.prototype.stopFollowMouse=function(){this.bgNode.off("touchmove",this.calcuCameraPosition,this)},e.prototype.calcuCameraPosition=function(t){var e=cc.find("Main Camera",this.node),o=t.getDelta(),i=e.position.subtract(cc.v3(o.x,o.y,0)),n=this.bgNode.width*this.bgNode.scale,s=this.bgNode.height*this.bgNode.scale;i.x>n/2-e.width/2?i.x=n/2-e.width/2:i.x<-(n/2-e.width/2)&&(i.x=-(n/2-e.width/2)),i.y>s/2-e.height/2?i.y=s/2-e.height/2:i.y<-(s/2-e.height/2+100)&&(i.y=-(s/2-e.height/2+100)),e.position=i},e.prototype.changeBgScale=function(t){if(console.log(cc.view.getVisibleOriginInPixel()),t.getScrollY()>0)this.bgNode.scale<1&&(this.bgNode.scale+=.05);else if(t.getScrollY()<0){if(this.bgNode.width/2*this.bgNode.scale<this.node.x)return;this.bgNode.scale>.7&&(this.bgNode.scale-=.05)}},e.prototype.isClueShow=function(){var t=this;1==this.houseClue.active&&1==this.pastureHouseClue.active&&1==this.farmHouseClue.active&&1==this.storeHouseClue.active&&1==this.windowsClue.active&&"found"!=this.nextSceneClue.name&&(this.nextSceneClue.name="found",setTimeout(function(){t.nextSceneClue.active=!0,t.bindOff(),t.bgComponent.stop(),t.doThisChangeForAvatarAndDialog(t.dialogNextScene0,0),setTimeout(function(){t.doThisChangeForAvatarAndDialog(t.dialogNextScene1,0),setTimeout(function(){t.bgComponent.init(),t.bindOn()},1e3)},1e3*t.dialogNextScene0.length)},5e3))},e.prototype.update=function(){this.isClueShow()},s([c(cc.Node)],e.prototype,"avatar",void 0),s([c(cc.Sprite)],e.prototype,"bg",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogInit0",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogInit1",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogInit2",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogInit3",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogStoreHouse0",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogStoreHouse1",void 0),s([c(cc.Node)],e.prototype,"storeHouseClickPic",void 0),s([c(cc.Node)],e.prototype,"storeHouseClue",void 0),s([c(cc.Node)],e.prototype,"storeHouseDoor",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogHouse0",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogHouse1",void 0),s([c(cc.Node)],e.prototype,"houseClickPic",void 0),s([c(cc.Node)],e.prototype,"houseClue",void 0),s([c(cc.Node)],e.prototype,"houseDoor",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogFarmHouse0",void 0),s([c(cc.Node)],e.prototype,"farmHouseClickPic",void 0),s([c(cc.Node)],e.prototype,"farmHouseClue",void 0),s([c(cc.Node)],e.prototype,"farmHouseDoor",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogPastureHouse0",void 0),s([c(cc.Node)],e.prototype,"pastureHouseClickPic",void 0),s([c(cc.Node)],e.prototype,"pastureHouseClue",void 0),s([c(cc.Node)],e.prototype,"pastureHousDoor",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogWindowsill0",void 0),s([c(cc.Node)],e.prototype,"windowsClue",void 0),s([c(cc.Node)],e.prototype,"windowsDoor",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogNextScene0",void 0),s([c(cc.SpriteFrame)],e.prototype,"dialogNextScene1",void 0),s([c(cc.Node)],e.prototype,"nextSceneClue",void 0),s([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{}]},{},["PicAni","PicAniActive","VideoM","main","mainATown","mainVCity"]);