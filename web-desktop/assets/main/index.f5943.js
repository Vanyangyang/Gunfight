window.__require=function t(e,o,n){function r(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var p="function"==typeof __require&&__require;if(!s&&p)return p(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return r(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({bullet:[function(t,e,o){"use strict";cc._RF.push(e,"6d900UNhnFELIc40qc5Ni59","bullet");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=0,e.weaponNode=null,e.angle=0,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){var t=cc.find("Canvas");this.node.removeFromParent(!0),t.addChild(this.node),this.weaponNode=cc.find("Canvas/player/weapon");var e=this.weaponNode.parent.convertToWorldSpaceAR(this.weaponNode.position),o=t.convertToNodeSpaceAR(e);this.node.setPosition(o),this.angle=this.weaponNode.angle,this.bulletMove()},e.prototype.bulletMove=function(){var t=this;this.speed<1e3&&(this.speed=1e3);var e=this.speed*Math.cos(this.angle*Math.PI/180),o=this.speed*Math.sin(this.angle*Math.PI/180);cc.tween(this.node).by(1,{position:cc.v3(e,o,0)}).call(function(){t.node.destroy()}).start()},e.prototype.update=function(){},i([a],e.prototype,"speed",void 0),i([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],dropthings:[function(t,e,o){"use strict";cc._RF.push(e,"c8b31OECQFKBIhoWmdTS7yq","dropthings");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.drop=null,e}return r(e,t),e.prototype.onLoad=function(){this.drop=Math.random()>.5?"cookie":"ammo",this.node.name=this.drop;var t=this.node.getComponent(cc.Sprite).spriteFrame;cc.resources.load(this.drop,function(e,o){e?console.log(e):t.setTexture(o)})},e.prototype.start=function(){},i([s],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],gameover:[function(t,e,o){"use strict";cc._RF.push(e,"3a3a1A0GrRO3Kzdr2VppYjg","gameover");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){},e.prototype.onClose=function(){this.node.destroy(),cc.director.loadScene("gameScene")},i([s],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],game:[function(t,e,o){"use strict";cc._RF.push(e,"149825iwUpK3p7YZ83oMn+I","game");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.monster=null,e.gameoverPrefab=null,e.player=null,e.canvas=null,e.groundHeight=320,e.score=0,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.player=cc.find("player"),this.canvas=cc.find("Canvas"),this.createNewMonster(),setTimeout(this.createNewMonster.bind(this),3e3)},e.prototype.createNewMonster=function(){var t=cc.instantiate(this.monster);cc.find("Canvas"),this.node.addChild(t),t.setPosition(cc.v2(219,-30))},e.prototype.gameover=function(){var t=cc.instantiate(this.gameoverPrefab);this.canvas.addChild(t)},e.prototype.update=function(){},i([a(cc.Prefab)],e.prototype,"monster",void 0),i([a(cc.Prefab)],e.prototype,"gameoverPrefab",void 0),i([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],monster:[function(t,e,o){"use strict";cc._RF.push(e,"9b350KpvGZH9aTpXyfHhU00","monster");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boom=null,e.dropThings=null,e.speed=0,e.canvas=null,e.player=null,e.health=null,e.score=null,e.isDead=!1,e}return r(e,t),e.prototype.onLoad=function(){this.canvas=cc.find("Canvas"),this.player=cc.find("Canvas/player"),this.score=cc.find("Canvas/status/score")},e.prototype.start=function(){cc.director.getCollisionManager().enabled=!0,this.schedule(this.findPlayer,1)},e.prototype.onCollisionEnter=function(t){if("bullet"==t.node.name&&1!=this.isDead){this.speed=50;var e=cc.instantiate(this.boom);if(this.canvas.addChild(e),e.setPosition(t.node.position),t.node.destroy(),setTimeout(function(){e.destroy()},200),this.health=this.node.getChildByName("health").getComponent(cc.ProgressBar),this.health.progress-=.1,this.health.progress<=0){var o=cc.instantiate(this.dropThings),n=this.node.position;this.canvas.addChild(o),o.setPosition(n),console.log(n),this.node.destroy();var r=this.canvas.getComponent("game");r.score+=100,this.score.getComponent(cc.Label).string="score:"+r.score,r.createNewMonster()}}},e.prototype.findPlayer=function(){var t=this.player.position.x-this.node.x,e=t/Math.abs(t)*this.speed;cc.tween(this.node).by(1,{x:e}).start()},i([a(cc.Prefab)],e.prototype,"boom",void 0),i([a(cc.Prefab)],e.prototype,"dropThings",void 0),i([a],e.prototype,"speed",void 0),i([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],player:[function(t,e,o){"use strict";cc._RF.push(e,"b397aCYmU5GuZBVBcovbUP+","player");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bullet=null,e.bulletEffect=null,e.bulletFire=null,e.speed=1,e.bulletnum=30,e.bulletcontainer=30,e.bulletBack=150,e.health=10,e.jumpDuration=.1,e.jumpHeight=200,e.canvas=null,e.weapon=null,e.ammo=null,e.moveTween=null,e.isFire=!1,e.bulletV=5,e.bulletTimeOut=0,e.isReAmmo=!1,e.isBlink=!1,e.healthMax=0,e.isMove=!1,e.isRight=!0,e.enableJump=!0,e.jumpCD=3,e}return r(e,t),e.prototype.onLoad=function(){var t=this;this.healthMax=this.health,this.weapon=this.node.getChildByName("weapon"),this.canvas=cc.find("Canvas"),this.ammo=cc.find("Canvas/status/ammo").getComponent(cc.Label),this.ammo.string="ammo:"+this.bulletnum+"/"+this.bulletBack,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.canvas.on("mousedown",function(){t.isFire=!0},this),this.canvas.on("mouseup",function(){t.isFire=!1},this),this.node.addChild(this.weapon)},e.prototype.start=function(){},e.prototype.onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.a:this.isMove=!0,this.isRight=!1;break;case cc.macro.KEY.d:this.isMove=!0,this.isRight=!0;break;case cc.macro.KEY.r:this.reAmmo();break;case cc.macro.KEY.space:if(0==this.enableJump)return;this.enableJump=!1;var e=this.runJumpAction();cc.tween(this.node).then(e).start()}},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.a:case cc.macro.KEY.d:this.isMove=!1}},e.prototype.fire=function(){if(0==this.bulletnum)this.reAmmo();else if(this.bulletnum>0){if(1==this.isReAmmo)return;this.isReAmmo=!0;var t=cc.instantiate(this.bullet);this.weapon.addChild(t),cc.audioEngine.playEffect(this.bulletFire,!1),this.bulletnum-=1,this.ammo.string="ammo:"+this.bulletnum+"/"+this.bulletBack,this.isReAmmo=!1}},e.prototype.update=function(t){this.enableJump||(this.jumpCD>0?this.jumpCD-=t:(this.jumpCD=3,this.enableJump=!0)),this.isMove&&(this.isRight?this.node.x+=this.speed:this.node.x-=this.speed),this.bulletTimeOut<1/this.bulletV?this.bulletTimeOut+=t:1==this.isFire&&(this.fire(),this.bulletTimeOut=0)},e.prototype.reAmmo=function(){var t=this;1!=this.isReAmmo&&this.bulletnum!=this.bulletcontainer&&0!=this.bulletBack&&(this.isReAmmo=!0,cc.audioEngine.playEffect(this.bulletEffect,!1),setTimeout(function(){var e=t.bulletcontainer-t.bulletnum;t.bulletnum=t.bulletcontainer>t.bulletBack&&t.bulletBack+t.bulletnum<t.bulletcontainer?t.bulletBack+t.bulletnum:t.bulletcontainer,t.bulletBack-=e,t.bulletBack=t.bulletBack<0?0:t.bulletBack,t.ammo.string="ammo:"+t.bulletnum+"/"+t.bulletBack,t.isReAmmo=!1},3e3))},e.prototype.runJumpAction=function(){var t=cc.tween().by(this.jumpDuration,{y:this.jumpHeight,easing:"signIn"}),e=cc.tween().by(this.jumpDuration,{y:-this.jumpHeight,easing:"signOut"});return cc.tween().sequence(t,e)},e.prototype.onHurt=function(){var t=this;1!=this.isBlink&&(this.health-=1,0==this.health&&(this.canvas.getComponent("game").gameover(),this.canvas.targetOff(this)),this.node.getChildByName("hp").getComponent(cc.ProgressBar).progress-=.1,this.isBlink=!0,cc.tween(this.node).blink(3,10).call(function(){t.isBlink=!1}).start())},e.prototype.onCollisionEnter=function(t){switch(t.node.name){case"monster":this.onHurt();break;case"ammo":this.bulletBack+=20,this.ammo.string="ammo:"+this.bulletnum+"/"+this.bulletBack,t.node.destroy();break;case"cookie":if(this.health==this.healthMax){t.node.destroy();break}this.health+=1,this.node.getChildByName("hp").getComponent(cc.ProgressBar).progress+=.1,t.node.destroy()}},i([a(cc.Prefab)],e.prototype,"bullet",void 0),i([a(cc.AudioClip)],e.prototype,"bulletEffect",void 0),i([a(cc.AudioClip)],e.prototype,"bulletFire",void 0),i([a],e.prototype,"speed",void 0),i([a],e.prototype,"bulletnum",void 0),i([a],e.prototype,"bulletcontainer",void 0),i([a],e.prototype,"bulletBack",void 0),i([a],e.prototype,"health",void 0),i([a],e.prototype,"jumpDuration",void 0),i([a],e.prototype,"jumpHeight",void 0),i([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],utils:[function(t,e,o){"use strict";cc._RF.push(e,"38f48z/+mFE1I4m5eED10T8","utils");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,c=(r.property,function(){function t(){}return t.getWorldPostation2=function(t){return null==t.parent?t.getPosition():t.parent.convertToWorldSpaceAR(t.getPosition())},t.getVectorRadians=function(t,e){var o=t.x,n=t.y,r=e.x,i=e.y-n,c=r-o,s=Math.abs(i)/Math.abs(c),a=0;return i>0&&c<0?a=180-180*Math.atan(s)/Math.PI:i>0&&c>0?a=180*Math.atan(s)/Math.PI:i<0&&c<0?a=180*Math.atan(s)/Math.PI-180:i<0&&c>0&&(a=180*-Math.atan(s)/Math.PI),a},n([i],t)}());o.default=c,cc._RF.pop()},{}],weapon:[function(t,e,o){"use strict";cc._RF.push(e,"24780VWvqlKp6Eiwp/Z9whw","weapon");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./utils"),s=cc._decorator,a=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.player=null,e}return r(e,t),e.prototype.onLoad=function(){var t=cc.find("Canvas");this.player.getComponent("player"),t.on("mousemove",this.mousedown,this)},e.prototype.start=function(){},e.prototype.update=function(){},e.prototype.mousedown=function(t){var e=t.getLocation(),o=c.default.getWorldPostation2(this.node);this.node.angle=c.default.getVectorRadians(o,e)},i([p(cc.Node)],e.prototype,"player",void 0),i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./utils":"utils"}]},{},["bullet","dropthings","game","gameover","monster","player","utils","weapon"]);